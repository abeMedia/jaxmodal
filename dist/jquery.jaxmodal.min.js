/*! jaxModal - v0.1.0 - 2015-02-24
* https://github.com/abemedia/jaxmodal
* Copyright (c) 2015 Adam Bouqdib; Licensed GPL-2.0 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery,window,document,void 0)}(function(a,b,c){function d(c,d,g){this.element=c,this.options=a.extend({},f,d),""===this.options.action&&(this.options.action=b.location.href),this._defaults=f,this._name=e,this.callback=g,this.init()}var e="jaxmodal",f={id:e,action:"",title:"Modal Title",size:"md",content:"Modal Content",actions:[{title:"Cancel",data:{dismiss:"modal"}},{title:"OK","class":"btn-primary",onclick:function(){a(this).button("loading"),a("#"+e+" form").submit()},data:{loadingText:"Loading..."}}],template:'<div class="<%=this._name%> modal fade" id="<%=id%>" tabindex="-1" role="dialog" aria-labelledby="<%=id%>Label" aria-hidden="true">  <div class="modal-dialog modal-<%=size%>">    <form action="<%=action%>" class="modal-content" role="form" method="post" enctype="multipart/form-data">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title" id="<%=id%>Label"><%=title%></h4>      </div>      <div class="modal-body" id="<%=id%>Body"><%=content%></div>      <div class="modal-footer" id="<%=id%>Actions">        <% for ( var i = 0; i < actions.length; i++ ) { %>        <button type="button" class="btn <%=(actions[i].class ? actions[i].class : "btn-default")%>"        <% for ( d in actions[i].data ) { %> data-<%=d%>="<%=actions[i].data[d]%>"<% } %>>        <%=actions[i].title%></button>        <% } %>      </div>    </form>  </div></div>'},g={};a.extend(d.prototype,{init:function(){var b=a.extend({},this.options,a(this.element).data()),c=a(this.render(b.template,b)),d=this.callback;c.find("#"+b.id+"Actions").children().each(function(c,d){a(d).on("click",b.actions[c].onclick)}),a("#"+b.id).length>0?a("#"+b.id)[0]!==c[0]&&a("#"+b.id).replaceWith(c):a("body").append(c),a("#"+b.id).modal("show"),a("#"+b.id).on("shown.bs.modal",function(){a("#"+b.id+" :input:enabled:visible:not([readonly],.close):first").focus(),"function"==typeof d&&d()})},destroy:function(){var b=a.extend({},this.options,a(this.element).data());a("#"+b.id).modal("hide").on("hidden.bs.modal",function(){a("#"+b.id).remove()})},render:function(a,b){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):g[a]=g[a]||this.render(c.getElementById(a).innerHTML);return b?d(b):d}}),a.fn[e]=function(b,c){return this.each(function(){a.data(this,"plugin_"+e,new d(this,b,c))})}});